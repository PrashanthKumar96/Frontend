import React, { useState } from 'react';
import { BrowserRouter as Router, Route, Link } from 'react-router-dom';

// Sample expense data
const initialExpenses = [
  { id: 1, title: 'Expense 1', amount: 100, status: 'Pending' },
  { id: 2, title: 'Expense 2', amount: 200, status: 'Approved' },
  // Add more expenses as needed
];

function ExpenseCard({ expense }) {
  return (
    <div className="expense-card">
      <h3>{expense.title}</h3>
      <p>Amount: ${expense.amount}</p>
      <p>Status: {expense.status}</p>
      <Link to={`/details/${expense.id}`}>View Details</Link>
    </div>
  );
}

function ExpenseDetails({ expense, onUpdateStatus }) {
  const [newStatus, setNewStatus] = useState(expense.status);

  const handleStatusChange = (e) => {
    setNewStatus(e.target.value);
  };

  const handleSubmit = () => {
    onUpdateStatus(expense.id, newStatus);
  };

  return (
    <div className="expense-details">
      <h2>{expense.title}</h2>
      <p>Amount: ${expense.amount}</p>
      <p>Status: {expense.status}</p>
      <div>
        <label htmlFor="status">Change Status:</label>
        <select id="status" value={newStatus} onChange={handleStatusChange}>
          <option value="Pending">Pending</option>
          <option value="Approved">Approved</option>
          <option value="Denied">Denied</option>
        </select>
        <button onClick={handleSubmit}>Submit</button>
      </div>
    </div>
  );
}

function App() {
  const [expenses, setExpenses] = useState(initialExpenses);

  const updateExpenseStatus = (id, newStatus) => {
    const updatedExpenses = expenses.map((expense) =>
      expense.id === id ? { ...expense, status: newStatus } : expense
    );
    setExpenses(updatedExpenses);
  };

  return (
    <Router>
      <div className="App">
        <h1>Expense Management</h1>
        <Route exact path="/">
          {expenses.map((expense) => (
            <ExpenseCard key={expense.id} expense={expense} />
          ))}
        </Route>
        <Route
          path="/details/:id"
          render={({ match }) => {
            const id = parseInt(match.params.id);
            const expense = expenses.find((e) => e.id === id);
            return (
              <ExpenseDetails expense={expense} onUpdateStatus={updateExpenseStatus} />
            );
          }}
        />
      </div>
    </Router>
  );
}

export default App;
